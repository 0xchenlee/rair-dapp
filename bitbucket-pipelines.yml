image: node:16.13.0

pipelines:
  pull-requests:
    '**': #this runs as default for any branch not elsewhere defined
      - step:
          name: Install Dependencies and run typescript test for minting-network
          caches:
            - node
          script:
            - yarn --cwd ./minting-marketplace
            - cd ./minting-marketplace && ./commands/run_tsc.sh
          condition:
            changesets:
              includePaths:
                - "minting-marketplace/**"
    feature/*: #any branch with a feature prefix
      - step:
          name: Install Dependencies and run typescript test for minting-network
          caches:
            - node
          script:
            - yarn --cwd ./minting-marketplace
            - cd ./minting-marketplace && ./commands/run_tsc.sh
          condition:
            changesets:
              includePaths:
                - "minting-marketplace/**"
  #branches: #these will run on every push of the branch
  #  dev:
  #    - step:
  #        script:
  #          - ...
  #  main:
  #    - step:
  #        script:
  #          - ...